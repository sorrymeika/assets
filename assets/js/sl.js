define("sl/base",function(){var i=function(){var n=this,i=Array.prototype.slice.call(arguments),t=i.shift();if(t)for(var o in t)n.options[o]=t[o];n.initialize.apply(n,i),n.options.initialize&&n.options.initialize.apply(n,i)};i.fn=i.prototype={options:{},initialize:function(){}},i.extend=function(n,i){var t=this,o=function(){},e=t.fn.options;n="function"==typeof n?n:(i=n,function(){t.apply(this,arguments)}),o.prototype=t.fn,n.fn=n.prototype=new o,i.options||(i.options={});for(var r in e)i.options[r]=e[r];for(var r in i)n.fn[r]=i[r];return n.superClass=t.fn,n.fn.constructor=n,n.extend=arguments.callee,n};var t={Class:i,functionlize:function(n,i){return function(){var t=n._single,o=slice.apply(arguments);if(t||(t=n._single=new n),!o.length)return t;var r,a,f,e=o.shift()+"";for(var r in t)if(r==e){f=a;break}return"function"==typeof f?f.apply(t,o):i&&i.call(t,e),this}}};return t});
define("sl/event",function(t){function u(t,n,i){(t||"").split(s).forEach(function(t){i(t,n)})}function p(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function c(t){var n=(""+t).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function l(t,n,i,e){var r,o;return o=c(n),o.ns&&(r=p(o.ns)),t.filter(function(t){return!(!t||o.e&&t.e!==o.e||o.ns&&!r.test(t.ns)||i&&t.cb!==i&&t.cb._cb!==i||e&&t.ctx!==e)})}function h(t,n){return this instanceof h?(n&&e.extend(this,n),this.type=t,this):new h(t,n)}var e=t("$"),r=t("./base"),o=[].slice,s=/\s+/,f=function(){return!1},a=function(){return!0};return h.prototype={isDefaultPrevented:f,isPropagationStopped:f,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a}},r.event={on:function(t,n,i){var r,e=this;return n?(r=this._events||(this._events=[]),u(t,n,function(t,n){var o=c(t);o.cb=n,o.ctx=i,o.ctx2=i||e,o.id=r.length,r.push(o)}),this):this},one:function(t,n,i){var e=this;return n?(u(t,n,function(t,n){var r=function(){return e.off(t,r),n.apply(i||e,arguments)};r._cb=n,e.on(t,r,i)}),this):this},off:function(t,n,i){var e=this._events;return e?t||n||i?(u(t,n,function(t,n){l(e,t,n,i).forEach(function(t){delete e[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var i,e,r,s,f,n=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new h(t)),i=o.call(arguments,1),t.args=i,i.unshift(t),e=l(this._events,t.type))for(s=e.length;++n<s;)if((r=t.isPropagationStopped())||!1===(f=e[n]).cb.apply(f.ctx2,i)){r||(t.stopPropagation(),t.preventDefault());break}return this}},r.Event=h,r.event});
define("sl/tmpl",["$"],function(n,t,e){function o(n){var t=function(n,t,e,i,o,a,u){if(!e)return"');__.push('";var l,f,c,p=s[e];return p?(l=p._default||[],a&&!r.last_word.test(o)&&(o+=a,a=""),o?(o=unescape(o),u=u?","+unescape(u)+")":a?")":"",f=a?o.indexOf(".")>-1?o+unescape(a):"("+o+").call($item"+u:o,c=a?f:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):c=f=l.$1||"null",i=unescape(i),"');"+p[t?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(c).split("$1").join(f).split("$2").join(i||l.$2||"")+"__.push('"):"');__.push('"},e=function(){return s[arguments[2]]?t.apply(this,arguments):"');__.push('{{"+arguments[2]+"}}');__.push('"},o="var $=$,call,__=[],$data=$item.data; with($data){__.push('",a=i.trim(n);return a=a.replace(r.sq_escape,"\\$1"),a=a.replace(r.nl_strip," "),a=a.replace(r.shortcut_replace,"{%= $1%}"),a=a.replace(r.lang_parse,t),a=a.replace(r.old_lang_parse,e),o+=a,o+="');}return __;",new Function("$","$item",o)}var i=n("$"),r={sq_escape:/([\\'])/g,sq_unescape:/\\'/g,dq_unescape:/\\\\/g,nl_strip:/[\r\t\n]/g,shortcut_replace:/\$\{([^\}]*)\}/g,lang_parse:/\{\%(\/?)(\w+|.)(?:\(((?:[^\%]|\%(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\%]|\%(?!\}))*?)\))?\s*\%\}/g,old_lang_parse:/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,template_anotate:/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,text_only_template:/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,html_expr:/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! |\{\%! /,last_word:/\w$/},s={each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{open:"}else{"},elif:{open:"}else if(($notnull_1) && $1a){"},elseif:{open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"break":{open:"return false;"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}};i.extend(i,{encode:function(n){return(""+n).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});var a=function(n,t){var e=o(n);return e(i,{data:t,nest:function(n,t){return a(n,t)}})};i.fn.tmpl=function(n){return i(a(this[0].innerHTML,n).join(""))},i.tmpl=e.exports=function(n,t){if("undefined"==typeof t){var e=o(n);return function(n){return e(i,{data:n,nest:function(n,t){return a(n,t)}}).join("")}}return a(n,t).join("")}});
define("sl/view",function(n,t,e){var i=n("$"),s=n("./base"),o=n("./event"),l=(n("./tmpl"),Array.prototype.slice),a=function(n,t){var e,s,o,r=t.override,l=n.prototype;for(var a in t)e=t[a],"override"!==a&&"undefined"!=typeof e&&(s=l[a],o=typeof s,"undefined"===o?l[a]=e:"function"===o?(l[a]=function(n,t){return function(){this._pluginFnCursorRecords[n]=t,t.apply(this,arguments)}}(a,e),e.__host=s):i.isPlainObject(s)?i.extend(!0,l[a],e):l[a]=e);if(r)for(var a in r)l[a]=r[a]},u=s.Class.extend(function(){var t,n=this,e=l.call(arguments),s=e.shift();if("undefined"==typeof s||i.isPlainObject(s)?n.$el||(n.$el=i(n.el),t=s):(n.$el=i(s),t=e.shift()),t&&t.override){var o;i.each(t.override,function(t,e){o=n[t],"undefined"!=typeof o&&(n.sealed[t]=o,e.sealed=o),n[t]=e}),delete t.override}n.options=i.extend({},n.options,t),n._bindDelegateAttrs=[],n._bindAttrs=[],n._bindListenTo=[],n.el=n.$el[0],n.listen(n.events),n.listen(n.options.events),n.initialize.apply(n,e),n.options.initialize&&n.options.initialize.apply(n,e),n.on("Destory",n.onDestory)},{$el:null,template:"",sealed:{},options:{},events:null,_bind:function(n,t,e){return this._bindDelegateAttrs.push([n,t,e]),this.$el.delegate(n,t,i.proxy(e,this)),this},_listenEvents:function(n){var t=this;n&&i.each(n,function(n,e){t.listen(n,e)})},listen:function(n,t){var e=this;if(t){var s=n.split(" "),o=s.shift();o=o.replace(/,/g," "),t=i.isFunction(t)?t:e[t],s.length>0&&""!==s[0]?e._bind(s.join(" "),o,t):e.bind(o,t)}else e._listenEvents(n);return e},listenTo:function(n){var t=l.apply(arguments),e=t[t.length-1];return t[t.length-1]=i.proxy(e,this),!(n instanceof i)&&(n=i(n)),this._bindListenTo.push(l.apply(t)),t.shift(),i.fn.on.apply(n,t),this},on:o.on,one:o.one,off:o.off,trigger:o.trigger,_pluginFnCursorRecords:{},host:function(){var n=l.call(arguments),t=n.shift();this._pluginFnCursorRecords[t].__host.apply(this,n)},$:function(n){return"string"==typeof n&&"#"==n[0]&&(n='[id="'+n.substr(1)+'"]'),i(n,this.$el)},bind:function(n,t){return this._bindAttrs.push([n,t]),this.$el.bind(n,i.proxy(t,this)),this},unbind:function(n,t){for(var o,e=this,i=e.$el,s=e._bindAttrs.length-1;s>=0;s--)o=e._bindAttrs[s],o[0]!=n||"undefined"!=typeof t&&t!==o[1]||(i.unbind.apply(i,o),e._bindAttrs.splice(s,1));return this},initialize:function(){},onDestory:function(){},destory:function(){var e,n=this.$el,t=this;i.each(this._bindDelegateAttrs,function(t,e){i.fn.undelegate.apply(n,e)}),i.each(this._bindListenTo,function(n,t){e=t.shift(),e.off.apply(e,t)}),t.one("Destory",function(){i.each(t._bindAttrs,function(t,e){i.fn.unbind.apply(n,e)}),t.$el.remove()}),t.trigger("Destory")}});u.extend=function(n,t){var e=this,o=("undefined"!=typeof t?t:n).plugins;return n=s.Class.extend.call(e,n,t),n.events=i.extend({},n.superClass.events,n.prototype.events),n.extend=arguments.callee,n.loadPlugins=e.loadPlugins,o&&n.loadPlugins(o),n},u.loadPlugins=function(n){for(var e,t=this,i=0,s=n.length;s>i;i++)e=n[i],"function"==typeof e?e(t):a(t,e)},u.Plugin=function(n){return function(t){a(t,n)}},s.View=u,e.exports=u});
define("sl/app",["$","util","bridge","./activity","./tmpl","./view","./plugins/template"],function(t){var i=t("$"),r=t("util"),o=(t("bridge"),t("./base")),u=(t("./tmpl"),t("./view")),h=(t("./activity"),t("./plugins/template"),r.noop,r.indexOf,r.lastIndexOf),v=(Array.prototype.slice,function(t){var e=t.indexOf("?");return-1!=e&&(t=t.substr(0,e)),t.toLowerCase()}),_=u.extend({events:{"tap,click a:not(.js-link-default)":function(t){var e=this,n=i(t.currentTarget);if(/http\:|javascript\:|mailto\:/.test(n.attr("href")))n.addClass("js-link-default");else if(t.preventDefault(),"tap"==t.type){var r=n.attr("href");/^#/.test(r)||(r="#"+r),null!=n.attr("forward")?e._currentActivity.forward(r):null!=n.attr("back")?e._currentActivity.back(r):e.to(r)}return!1},"tap [data-href]":function(t){var e=this,n=i(t.currentTarget);/http\:|javascript\:|mailto\:/.test(n.attr("data-href"))||e.to(n.attr("data-href"))},"tap [data-back]":function(t){this._currentActivity.back(i(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this._currentActivity.forward(i(t.currentTarget).attr("data-forward"))},"touchmove header,footer":function(t){t.preventDefault()}},el:'<div class="viewport"></div>',routes:[],mapRoute:function(t){var e=this.routes;i.each(t,function(t,n){var i=[],r={},s="^(?:/{0,1})"+t.replace(/(\/|^|\?){([^\/\?]+)}/g,function(t,e,n){var r=n.split(":");return r.length>1&&(i.push(r.shift()),n=r.join(":")),e.replace("?","\\?*")+"("+n+")"})+"$";r={reg:new RegExp(s),parts:i},r.view="string"==typeof n?n:n.view,e.push(r)})},matchRoute:function(t){var e=null,n={},r=t.replace(/^#/,"")||"/";t=r;var o,s=t.indexOf("?");return-1!=s?(o=t.substr(s+1),t=t.substr(0,s),o.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(t,e,i){return n[e]=decodeURIComponent(i),""})):o="",i.each(this.routes,function(s,a){var u=a.reg?t.match(a.reg):null;return u?(e={url:u[0],hash:r,view:a.view,data:{},queryString:o,query:n},i.each(a.parts,function(t,n){e.data[n]=u[t+1]}),!1):void 0}),e},initialize:function(){var t=this;t.mask=i('<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div>').on("tap click touchend touchmove touchstart",function(t){t.preventDefault()}).appendTo(document.body)},skip:0,_history:[],_historyCursor:-1,_currentActivity:null,start:function(){o.app=this;var t=this;location.hash||(location.hash="/"),t.hash=location.hash.replace(/^#/,"")||"/",t._getOrCreateActivity(t.hash,function(e){t._currentActivity=e,t._history.push(e.hash),t._historyCursor++,e.$el.appendTo(t.$el),e.then(function(){e.trigger("Resume"),e.trigger("Show")}),i(window).on("hashchange",function(){t.hash=location.hash.replace(/^#/,"")||"/";var e=h(t._history,t.hash),n=t._skipRecordHistory||-1==e;t._skipRecordHistory!==!0?-1==e?(t._history.push(t.hash),t._historyCursor++):(t._history.length=e+1,t._historyCursor=e):t._skipRecordHistory=!1,0==t.skip?t._currentActivity[n?"forward":"back"](t.hash):t.skip>0?t.skip--:t.skip=0})}),t.$el.appendTo(document.body)},to:function(t){t=t.replace(/^#/,"")||"/";var e=this,n=e._currentActivity,i=h(e._history,t);n.compareUrl(t)||n.prepareExitAnimation(),-1==i?(e._history.splice(e._historyCursor+1,0,t),e._history.length=e._historyCursor+2,e._historyCursor++,e._skipRecordHistory=!0,location.hash=t):history.go(i-e._historyCursor)},navigate:function(t){this.skip++,this.to(t)},_activities:{},get:function(t){return this._activities[v(t)]},set:function(t,e){this._activities[v(t)]=e},remove:function(t){this._activities[v(t)]=void 0},siblings:function(t,e){i.each(this._activities,function(n,i){"undefined"!=typeof i&&n!=t&&n!=e&&i.$el.addClass("stop")})},viewPath:"views/",_getOrCreateActivity:function(t,e){var n=this,i=n.matchRoute(t);if(i){var r=n.get(i.url);null==r?seajs.use(n.viewPath+i.view,function(t){null!=t?(r=new t({application:n,route:i}),n.set(i.url,r),r.then(function(){e.call(n,r,i)})):(n.skip++,n._currentActivity.finishEnterAnimation(),history.back())}):e.call(n,r,i)}}}),y=function(t){this._tip=i('<div class="tip" style="display:none">'+(t||"")+"</div>").appendTo("body")};return y.prototype={_hideTimer:null,_clearHideTimer:function(){var t=this;t._hideTimer&&(clearTimeout(t._hideTimer),t._hideTimer=null)},_visible:!1,show:function(t){var e=this,n=e._tip;return e._clearHideTimer(),t&&(e._hideTimer=setTimeout(function(){e._hideTimer=null,e.hide()},t)),e._visible?void 0:(e._visible=!0,n.css({"-webkit-transform":"scale(0.2,0.2)",display:"block",visibility:"visible",opacity:0}).animate({scale:"1,1",opacity:.9},200,"ease-out"),e)},hide:function(){var t=this,e=t._tip;if(t._visible)return t._visible=!1,e.animate({scale:".2,.2",opacity:0},200,"ease-in",function(){e.hide().css({"-webkit-transform":"scale(1,1)"})}),t._clearHideTimer(),t},text:function(t){var e=this,n=e._tip;return n.html(t).css({"-webkit-transform":"scale(1,1)","-webkit-transition":""}),"none"==n.css("display")&&n.css({visibility:"hidden",display:"block",marginLeft:-1e3}),n.css({marginTop:-1*n.height()/2,marginLeft:-1*n.width()/2}),e}},i.extend(o,{Application:_,tip:o.functionlize(y,function(t){this.text(t).show(3e3)})}),_});
define("sl/activity",["$","util","bridge","./tmpl","./view","./widget/scroll","./plugins/template"],function(t){var e=t("$"),r=t("util"),o=t("bridge"),l=(t("./base"),t("./tmpl"),t("./view")),u=t("./widget/scroll"),c=t("./plugins/template"),p=r.noop,h=(r.indexOf,Array.prototype.slice),d=function(t){var i=t.indexOf("?");return-1!=i&&(t=t.substr(0,i)),t.toLowerCase()},v=l.extend({plugins:[c],options:{route:null},useAnimation:!0,animationName:null,application:null,el:'<div class="view"></div>',_setRoute:function(t){this.route=t,this.hash=t.hash,this.url=t.url},initialize:function(){var t=this;t.className&&t.$el.addClass(t.className),t.className=t.el.className,t._setRoute(t.options.route),t.application=t.options.application,t.on("Start",t.onStart),t.on("Resume",t.onResume),t.on("Show",t.onShow),t.on("Pause",t.onPause),t.on("QueryChange",t.onQueryChange),t._dfd=e.when(t.options.templateEnabled&&t.initWithTemplate()).then(function(){t.$(".main,.scroll").each(function(){new u(this)})}).then(e.proxy(t.onCreate,t)).then(function(){t.trigger("Start")})},onCreate:p,onStart:p,onResume:p,onShow:p,onStop:p,onRestart:p,onPause:p,onQueryChange:p,then:function(t){return this._dfd=this._dfd.then(e.proxy(t,this))},listenResult:function(t,i){this.listenTo(this.application,t,i)},setResult:function(){var t=h.call(arguments);this.application.trigger.apply(this.application,t)},isPrepareExitAnimation:!1,prepareExitAnimation:function(){if(!this.isPrepareExitAnimation){this.isPrepareExitAnimation=!0;var t=this;!t.useAnimation,t.application.mask.show()}},finishEnterAnimation:function(){var t=this;t.$el.addClass("active"),t.application.mask.hide(),t.isPrepareExitAnimation=!1,t.then(function(){t.trigger("Show")})},compareUrl:function(t){return d(t)===this.route.url.toLowerCase()},redirect:function(t){var i=this,n=i.application;n._getOrCreateActivity(t,function(t){t.el.className=t.className+" active",n.$el.append(t.$el),n._currentActivity=t,i.$el.remove(),i.trigger("Pause"),t.then(function(){t.trigger("Resume"),t.trigger("Show")})})},_transitionTime:o.ios&&parseFloat(o.osVersion)<7?function(t){this.el.style.webkitTransition="all "+(t||0)+"ms ease-out 0ms"}:function(t){this.el.style.webkitTransitionDuration=(t||0)+"ms"},_animationFrom:function(t,i){this.el.className=this.className+" "+(t?t+"-":"")+i},_animationTo:function(t,i){this.$el.addClass((t?t+"-":"")+i)},_to:function(t,i,n,r,o){i||(i=300);var s=this,a=s.application;t.toLowerCase()!=location.hash.replace(/^#/,"").toLowerCase()&&a.navigate(t),a._getOrCreateActivity(t,function(t,l){if(n=n||("open"==r?t:s).animationName,t.route.hash!=l.hash&&(t._setRoute(l),t.trigger("QueryChange")),t.url!=s.url)if(s.application.siblings(l.url,s.url),s.prepareExitAnimation(),null===t.el.parentNode&&t.$el.appendTo(a.$el),a._currentActivity=t,t.then(function(){t.trigger("Resume")}),s.useAnimation){t._animationFrom(n,r+"_enter_animation-from"),s._animationFrom(n,r+"_exit_animation-from"),s.el.clientHeight,s._transitionTime(i),t._transitionTime(i);var u=!1;e(t.$el).add(s.$el).one(e.fx.transitionEnd,function(){u||(u=!0,s._transitionTime(0),t._transitionTime(0),t.finishEnterAnimation(),o&&o(t))}),s._animationTo(n,r+"_exit_animation-to"),t._animationTo(n,r+"_enter_animation-to")}else t.finishEnterAnimation(),o&&o(t)})},forward:function(t,i,n){var e=this;e._to(t,i,n,"open",function(){e.trigger("Pause")})},back:function(t,i,n){var e=this;"string"!=typeof t?(e.prepareExitAnimation(),history.back()):("string"==typeof i&&(n=i,i=null),e._to(t,i,n,"close",function(){e.destory()}))},finish:function(){this.destory()},destory:function(){this.application.remove(this.url),l.fn.destory.apply(this,arguments)}});return v});
define("sl/style",["$","util","extend/matchMedia","extend/ortchange"],function(t,i,n){var e=t("$"),o=t("util");t("extend/matchMedia"),t("extend/ortchange"),e(function(){e.mediaQuery={heightchange:"screen and (height: "+window.innerHeight+"px)"};var t=null,i=function(){null!=t&&(t.parentNode.removeChild(t),t=null),t=o.style(".screen_height{height:"+window.innerHeight+"px}.portrait_height{height:"+Math.max(window.innerHeight,window.innerWidth)+"px}.viewport,.minheight,.view,.main { min-height:"+window.innerHeight+"px; }.screen{overflow:hidden;width:"+window.innerWidth+"px;height:"+window.innerHeight+"px;}.minheight-30 { min-height:"+(window.innerHeight-30)+"px }.minheight-20 { min-height:"+(window.innerHeight-20)+"px }.minheight-5 { min-height:"+(window.innerHeight-5)+"px }.minheight-100{ min-height:"+(window.innerHeight-100)+"px}.minheight-70{ min-height:"+(window.innerHeight-70)+"px}")};e.matchMedia(e.mediaQuery.heightchange).addListener(function(){i(),e(window).trigger("heightchange")}),i()});var r={},a=document.createElement("div"),s=e.fx.cssPrefix.replace(/-/g,"")+"Perspective"in a.style;a=null,n.exports={has3d:s,anim:{addBottomStyle:function(t){if(r["bottom"+t]!==!0){r["bottom"+t]=!0,o.style(".viewport .anim-bottom"+t+"-in { background-color:transparent; z-index: 2; -webkit-transition-duration: 0; -webkit-transform: translate(0,100%) translateZ(0); }.anim-bottom"+t+"-in.timer, .anim-in-timer { -webkit-transition: -webkit-transform 300ms ease 0ms; }.anim-bottom"+t+"-in.run { -webkit-transform: translate(0,0) translateZ(0); }.anim-bottom"+t+"-in.finish { -webkit-transform: translate(0,"+t+"px) translateZ(0); }.anim-bottom"+t+"-in.active { -webkit-transform: none; }.anim-bottom"+t+"-out {overflow:hidden;z-index: 0; -webkit-transition-duration: 0; -webkit-transform: translate(0,0) translateZ(0); }.anim-bottom"+t+"-out.run { -webkit-transform: translate(0,"+t+"px) translateZ(0); }.anim-bottom"+t+"-out.timer { -webkit-transition: -webkit-transform 300ms ease 0ms; }.anim-bottom"+t+"-out.stop { height: 0px; overflow: hidden; }.anim-bottom"+t+"-out.under { height: 0px; overflow: hidden; }");var i=null,n=function(){null!=i&&(i.parentNode.removeChild(i),i=null),i=o.style(".anim-bottom"+t+"-in{overflow:hidden;-webkit-transform: translate(0,"+(window.innerHeight-t)+"px) translateZ(0);}.anim-bottom"+t+"-in .fixtop,.anim-bottom"+t+"-out .fixtop{margin-top:"+(window.innerHeight-t)+"px;}.anim-bottom"+t+"-in .fixHeight,.anim-bottom"+t+"-out .fixHeight{overflow:hidden;height:"+t+"px}")};e(window).on("heightchange",function(){n()}),n()}}}}});
define("sl/plugins/template",["$","bridge","./../tmpl"],function(t){var i=t("$"),r=t("bridge"),o=t("./../tmpl"),a=t("./../view"),s=Array.prototype.slice,l=t("views.text"),u=null==l?i.get:function(t,e){e(l[t])},c={},p=function(t,e){var n=this,r=i.Deferred(),o=c[t];return"undefined"!=typeof o?(e&&e(o),r.resolveWith(n,[o])):u(t,function(a){var s=[],l=[];if(o={_templates:{},templates:s,includes:[]},a=a.replace(/<include src=("|')(.+?)\1[^>]*?>/gim,function(t,e,i){var r="<include_"+i+">";return l.push(function(){return p.call(n,i).done(function(t){o.main=o.main.replace(r,t.main),o.includes.push(t)})}),r}),a=a.replace(/<script([^>]+)>([\S\s]+?)<\/script>/gim,function(t,e,n){var i=e.match(/\bid=("|')(.+?)\1/i);return i&&(o._templates[i[2]]=s.length),s.push(n),""}),s.push(a),i.each(s,function(t,e){s[t]=e.replace(/\{\%include\s+(\w+)\%\}/gim,function(t,e){return s[o._templates[e]]})}),o.main=a,o.template=o.templates.length?o.templates[0]:null,c[t]=o,l.length){for(var u=l.shift()();l.length;)u=u.then(l.shift());u.then(function(){e&&e(o),r.resolveWith(n,[o])})}else e&&e(o),r.resolveWith(n,[o])}),r.promise()};return a.Plugin({options:{templateEnabled:!0},initWithTemplate:function(){var t=this;return p(t.template,function(e){t.$el.html(e.main),t.templates=e})},template:"views/home.html",_getTemplate:function(t,e){var n=this;if(e=e||this.templates,!t)return e.template;if("number"==typeof t)return e.templates[t];var i=e._templates;if("undefined"!=typeof i[t])return e.templates[i[t]];for(var a,r=0,o=e.includes.length;o>r;r++)if(a=n._getTemplate(t,e.includes[r]))return a;return null},tmpl:function(){var t=this,e=s.apply(arguments),n=0,a=e[n++],l=e[n++],u=e.pop();if(template=t._getTemplate(a),"string"==typeof l){var c=i.Deferred();return i.ajax({url:r.url(l),data:u,dataType:"json",type:"post",success:function(e){c.resolveWith(t,[o(template,e)])},error:function(){c.reject()}}),c.promise()}return o(template,u)}})});
define("sl/widget/scroll",["$","./../base","./../view","./../tween"],function(t){var o=(t("$"),t("./../base"),t("./../view")),a=t("./../tween"),s="ontouchstart"in window,l=Math,u=a.Quad.easeOut,c=o.extend({events:{touchstart:"_start",touchmove:"_move",touchend:"_end"},_start:function(t){var e=this,i=s?t.touches[0]:t;e.stop=!0,e.x=e.el.scrollLeft,e.y=e.el.scrollTop,e.startX=e.x,e.startY=e.y,e.pointX=i.pageX,e.pointY=i.pageY,e.startTime=t.timeStamp||Date.now(),e.moved=!1,e.wrapperW=e.el.clientWidth,e.wrapperH=e.el.clientHeight,e.scrollerW=e.el.scrollWidth,e.scrollerH=e.el.scrollHeight,e.maxScrollX=e.scrollerW-e.wrapperW,e.maxScrollY=e.scrollerH-e.wrapperH,e.minScrollY=0,e._isStart=e.wrapperW<e.scrollerW||e.wrapperH<e.scrollerH},_move:function(t){if(this._isStart){if(t.isDefaultPrevented())return console.log(this._isStart),void(this._isStart=!1);t.preventDefault();var e=this,i=s?t.touches[0]:t,n=e.pointX-i.pageX,r=e.pointY-i.pageY,o=e.x+n,a=e.y+r,u=t.timeStamp||Date.now();e.pointX=i.pageX,e.pointY=i.pageY,e.distX+=n,e.distY+=r,e.absDistX=l.abs(e.distX),e.absDistY=l.abs(e.distY),e.absDistX<6&&e.absDistY<6||(e.moved=!0,e.scrollTo(o,a),e.dirX=n>0?-1:0>n?1:0,e.dirY=r>0?-1:0>r?1:0,u-e.startTime>300&&(e.startTime=u,e.startX=e.x,e.startY=e.y))}},_end:function(t){if(!s||0===t.touches.length){var h,e=this,o=(s?t.changedTouches[0]:t,{dist:0,time:0}),a={dist:0,time:0},u=(t.timeStamp||Date.now())-e.startTime,c=e.x,p=e.y;if(e.moved)return t.preventDefault(),300>u&&(o=c?e._momentum(c-e.startX,u,e.maxScrollX-e.x,e.x,e.options.bounce?e.wrapperW:0):o,a=p?e._momentum(p-e.startY,u,e.maxScrollY-e.y,e.y,e.options.bounce?e.wrapperH:0):a,c=e.x+o.dist,p=e.y+a.dist,(e.x<0&&0>c||e.x>e.maxScrollX&&c>e.maxScrollX)&&(o={dist:0,time:0}),(e.y<e.minScrollY&&p<e.minScrollY||e.y>e.maxScrollY&&p>e.maxScrollY)&&(a={dist:0,time:0})),o.dist||a.dist?(h=l.max(l.max(o.time,a.time),10),void e.scrollTo(l.round(c),l.round(p),h)):void 0}},_momentum:function(t,e,i,n,r){var o=6e-4,a=l.abs(t)/e,s=a*a/(2*o),u=0,c=0;return t>0&&s>i?(c=r/(6/(s/a*o)),i+=c,a=a*i/s,s=i):0>t&&s>n&&(c=r/(6/(s/a*o)),n+=c,a=a*n/s,s=n),s*=0>t?-1:1,u=a/o,{dist:s,time:l.round(u)}},initialize:function(){console.log(this.el)},scrollTo:function(t,e,i){var n=this;if(i&&0!==i){var r=0,o=i,a=n.x,s=n.y,l=Date.now(),c=function(){if(!n.stop){r=Date.now()-l;var i=u(r,a,t-a,o),p=u(r,s,e-s,o);o>=r?(n.scrollTo(i,p),requestAnimationFrame(c)):(n.scrollTo(t,e),n.stop=!0)}};n.stop=!1,c()}else t=0>t?0:t>=n.maxScrollX?n.maxScrollX:t,t!=n.x&&(n.el.scrollLeft=t,n.x=t),e=0>e?0:e>=n.maxScrollY?n.maxScrollY:e,e!=n.y&&(n.el.scrollTop=e,n.y=e),n.$el.trigger("scrollChange",[t,e])}});return c});
define("sl/widget/loading",["$","util","bridge","./../view"],function(t,e,i){var n=t("$"),r=t("util"),s=(t("./../base"),t("./../view")),a=t("bridge");r.style(".server_error{}");var l=[],u=s.extend({events:{"tap .js_reload":function(){this.reload()}},options:{},pageIndex:1,pageSize:10,params:{},KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},initialize:function(){n.extend(this,r.pick(this.options,["check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"]))},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},showError:function(t){var e=this;if(e.isError)if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.error)).appendTo(e.$el);i.find(".js_msg").html(t||"加载失败"),i.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',error:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',showLoading:function(){var t=this;if(this.$error&&this.$error.hide(),1==t.pageIndex)t.$loading||(t.$loading=n(t.template)),t.$loading.css({display:"block"}).appendTo(t.$el),t.$refreshing&&t.$refreshing.hide();else{var e=t.$refreshing||(t.$refreshing=n(t.refresh)).appendTo(t.$el);e.show().find(".js_msg").html("正在载入..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide()}},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.hide()},reload:function(){var t=this;t.isLoading||(t.isLoading=!0,t.pageIndex=1,t.params[t.KEY_PAGE]=1,t._load())},load:function(t){var e=this;e.isLoading||(e.isLoading=!0,t=n.extend({url:"",headers:"Win32"!=navigator.platform&&"Win64"!=navigator.platform&&localStorage.authCookies?{Cookie:localStorage.authCookies}:null,type:"GET",data:{},pageIndex:e.pageIndex,pageSize:e.pageSize,timeout:15,success:r.noop,refresh:null,error:function(){e.showError()}},t),e.loadingOptions=t,e.params=t.data,e.pageIndex=t.pageIndex,e.pageSize=t.pageSize,e.params[e.KEY_PAGESIZE]=e.pageSize,e._load())},_load:function(){for(var t=this,e=l.length-1;e>=0;e--)l[e].disableAutoRefreshing();t.params[t.KEY_PAGE]=t.pageIndex,t.abort(),t.showLoading(),t._xhr=n.ajax({url:a.url(t.loadingOptions.url),headers:t.loadingOptions.headers,data:t.params,type:t.loadingOptions.type,dataType:t.loadingOptions.dataType||"json",error:function(e){t._xhr=null,t.isError=!0,t.isLoading=!1,t.loadingOptions.error.call(t,{msg:"网络错误"},e)},success:function(e,i,n){t._xhr=null,t.isLoading=!1,t.loadingOptions.check===!1||t.check(e)?t.loadingOptions.checkData===!1||t.hasData(e)?(t.checkAutoRefreshing(e),t.loadingOptions.success.call(t,e,i,n)):t.dataNotFound(e):(t.isError=!0,t.isLoading=!1,t.loadingOptions.error.call(t,e))},complete:function(){}})},_refresh:function(){this._load()},dataNotFound:function(){var i=this;1==i.pageIndex?i.showError("暂无数据"):setTimeout(function(){i.$refreshing.animate({height:0},300,"ease-out",function(){i.$refreshing.hide().css({height:""})})},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$container.height()>=n.$refreshing.position().top&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.loadingOptions.refresh&&e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE]?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$container.on("scrollChange",n.proxy(this._scroll,this)),this._scrollY=this.$el.scrollTop,this.el.scrollTop+this.$el.height()>=this.$refreshing.offset().top&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$el.off("scrollChange",this._scroll),this.$refreshing&&this.$refreshing.remove())},abort:function(){this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading())},destory:function(){this.abort(),s.fn.destory.apply(this,arguments)}});i.exports=u});
define("sl/widget/slider",["$","util","./../view","./../tmpl"],function(t,e,i){var n=t("$"),r=t("util"),s=t("./../view"),o=t("./../tmpl"),a=s.extend({events:{touchstart:"_start",touchmove:"_move",touchend:"_end"},options:{index:-1,width:"100%",onChange:null,data:[],dots:!1,imagelazyload:!1,arrow:!1},loop:!1,index:0,appendItem:function(){var t=n(this.renderItem(""));return this.$slider.append(t),this.length++,this._adjustWidth(),t},prependItem:function(){var t=n(this.renderItem(""));return this.$slider.prepend(t),this.length++,this._adjustWidth(),t},render:function(t){return this.renderItem(this.itemTemplate(t))},renderItem:o('<li class="js_slide_item">{%html $data%}</li>'),itemTemplate:"${TypeName}",navTemplate:o('<ol class="js_slide_navs">{%each(i,item) items%}<li class="slide_nav_item${current}"></li>{%/each%}</ol>'),template:o('<div class="slider"><ul class="js_slider">{%html items%}</ul>{%html navs%}</div>'),initialize:function(){n.extend(this,r.pick(this.options,["data","width","loop","render","template","itemTemplate","navTemplate"]));var a,t=this,e=t.data,i=[],l=t.options.index;"string"==typeof t.itemTemplate&&(t.itemTemplate=o(t.itemTemplate)),"string"==typeof t.width&&(t.width=parseInt(t.width.replace("%",""))),!n.isArray(e)&&(e=[e]),t.length=e.length;for(var h=0,u=e.length;u>h;h++)i.push(t.render(e[h]));t.$root=n(t.template({items:i.join("")})).appendTo(t.$el),a=t.$slider=t.$(".js_slider"),t.$items=a.children(),t.slider=a[0],t.slider.style["-webkit-transition"]="-webkit-transform 0ms ease 0ms",t.index=-1==l?t.length%2==0?t.length/2-1:Math.floor(t.length/2):l,t.length<2?t.loop=!1:t.width<100&&(t.loop=!1);var p;t.loop?(a.prepend(t.$items.eq(t.length-1).clone()),a.append(t.$items.eq(0).clone())):p=t.length,t._adjustWidth(),t._refreshXY(),t.options.imagelazyload&&(t.bind("Change",function(){t._loadImage()}),t._loadImage()),t.options.arrow&&(t._prev=n('<span class="slider-pre js_pre"></span>').appendTo(t.$el),t._next=n('<span class="slider-next js_next"></span>').appendTo(t.$el),t.listen("tap .js_pre",function(){t.slideTo(t.index-1)}).listen("tap .js_next",function(){t.slideTo(t.index+1)})),n(window).on("ortchange",function(){t.itemWidth=t.$items.width(),t._pos(t.itemWidth*(t.index-1)*-1,t.y)})},_loadImage:function(){var t=this,e=t.$items.eq(t.index);e.prop("_detected")||(t.loop&&(0==t.index?e=e.add(t.$slider.children(":last-child")):t.index==t.length-1&&(e=e.add(t.$slider.children(":first-child")))),e.find("img[lazyload]").each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),e.prop("_detected",!0))},_adjustWidth:function(){var t=this,e=t.$slider,i=e.children(),n=i.length;e.css({"margin-left":(100-t.width)/2-(t.loop?t.width:0)+"%"}),i.css({width:100/n+"%"}),e.css({width:n*t.width+"%"}),t.itemWidth=t.$items.width(),t.minX=-1*t.itemWidth*(t.length-1),t.slider.style["-webkit-transform"]="translate("+t.itemWidth*t.index*-1+"px,0px)"},_refreshXY:function(){var t=this,e=getComputedStyle(t.slider,null)["-webkit-transform"].replace(/[^0-9\-.,]/g,"").split(",");t.x=parseInt(e[4]),t.y=parseInt(e[5])},_transitionTime:function(t){t+="ms",this.slider.style["-webkit-transition-duration"]=t},_start:function(t){var e=this,i=t.touches[0];/js_pre|js_next/.test(t.target.className)||e.isTransition||(e._stopChange(),e._isStart=!0,e._transitionTime(0),e._refreshXY(),e.startX=e.x,e.startY=e.y,e.pointX=i.pageX,e.pointY=i.pageY,e.isMoved=0)},_move:function(t){if(this._isStart){var e=this,i=t.touches[0],n=e.pointX-i.pageX,r=e.pointY-i.pageY,s=e.startX-n;if(1!==e.isMoved)return 0===e.isMoved?(n=Math.abs(n),r=Math.abs(r),void(n>6&&n>r?(e.isMoved=1,t.preventDefault()):r>6&&r>n&&(e.isMoved=2))):void(this._isStart=!1);t.preventDefault(),e.moveX=i.pageX,e.loop||(s=s>0?0:s<e.minX?e.minX:s),e._stopChange(),e._pos(s,e.startY)}},_pos:function(t,e){var i=this,n=i.slider;i.x=t||0,i.y=e||0,n.style["-webkit-transform"]="translate("+i.x+"px,"+i.y+"px) translateZ(0)"},_transitionEnd:function(){var t=this;t._transitionTime(0)},_delayChange:function(){var t=this;t.timer=setTimeout(function(){t.timer=!1,t.options.onChange&&t.options.onChange.call(t,t.index),t.trigger("Change",t.index)},400)},_stopChange:function(){var t=this;t.timer&&(clearTimeout(t.timer),t.timer=!1)},_end:function(t){var e=this,i=t.changedTouches[0],n=e.pointX-i.pageX;if(e._isStart)if(e._isStart=!1,!e.loop&&(e.startX-n>0||e.startX-n<e.minX));else{var s=e.index;n>20?s++:-20>n?s--:e.loop,e.slideTo(s)}},slideTo:function(t){var e=this;if(!e.isTransition){e.isTransition=!0,e._transitionTime(200),x=e.itemWidth*t*-1,t>=e.length?t=0:0>t&&(t=e.length-1);var i=setTimeout(function(){i=!1,e.isTransition=!1},300);e.$slider.one(n.fx.transitionEnd,function(){i&&clearTimeout(i),e.isTransition=!1,e._transitionEnd(),(t==e.length-1||0==t)&&e._pos(e.itemWidth*t*-1,e.startY)}),e._pos(x,e.startY),e.index!=t&&(e.index=t,e._delayChange())}}});i.exports=a});
define("sl/widget/loading",["$","util","bridge","./../view"],function(t,e,i){var n=t("$"),s=t("util"),o=(t("./../base"),t("./../view")),a=t("bridge");s.style(".server_error{}");var l=[],h=o.extend({events:{"tap .js_reload":function(){this.reload()}},options:{},pageIndex:1,pageSize:10,params:{},KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},initialize:function(){n.extend(this,s.pick(this.options,["check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"]))},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},showError:function(t){var e=this;if(e.isError)if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.error)).appendTo(e.$el);i.find(".js_msg").html(t||"加载失败"),i.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',error:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',showLoading:function(){var t=this;if(this.$error&&this.$error.hide(),1==t.pageIndex)t.$loading||(t.$loading=n(t.template)),t.$loading.css({display:"block"}).appendTo(t.$el),t.$refreshing&&t.$refreshing.hide();else{var e=t.$refreshing||(t.$refreshing=n(t.refresh)).appendTo(t.$el);e.show().find(".js_msg").html("正在载入..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide()}},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.hide()},reload:function(){var t=this;t.isLoading||(t.isLoading=!0,t.pageIndex=1,t.params[t.KEY_PAGE]=1,t._load())},load:function(t){var e=this;e.isLoading||(e.isLoading=!0,t=n.extend({url:"",headers:"Win32"!=navigator.platform&&"Win64"!=navigator.platform&&localStorage.authCookies?{Cookie:localStorage.authCookies}:null,type:"GET",data:{},pageIndex:e.pageIndex,pageSize:e.pageSize,timeout:15,success:s.noop,refresh:null,error:function(){e.showError()}},t),e.loadingOptions=t,e.params=t.data,e.pageIndex=t.pageIndex,e.pageSize=t.pageSize,e.params[e.KEY_PAGESIZE]=e.pageSize,e._load())},_load:function(){for(var t=this,e=l.length-1;e>=0;e--)l[e].disableAutoRefreshing();t.params[t.KEY_PAGE]=t.pageIndex,t.abort(),t.showLoading(),t._xhr=n.ajax({url:a.url(t.loadingOptions.url),headers:t.loadingOptions.headers,data:t.params,type:t.loadingOptions.type,dataType:t.loadingOptions.dataType||"json",error:function(e){t._xhr=null,t.isError=!0,t.isLoading=!1,t.loadingOptions.error.call(t,{msg:"网络错误"},e)},success:function(e,i,n){t._xhr=null,t.isLoading=!1,t.loadingOptions.check===!1||t.check(e)?t.loadingOptions.checkData===!1||t.hasData(e)?(t.checkAutoRefreshing(e),t.loadingOptions.success.call(t,e,i,n)):t.dataNotFound(e):(t.isError=!0,t.isLoading=!1,t.loadingOptions.error.call(t,e))},complete:function(){}})},_refresh:function(){this._load()},dataNotFound:function(){var i=this;1==i.pageIndex?i.showError("暂无数据"):setTimeout(function(){i.$refreshing.animate({height:0},300,"ease-out",function(){i.$refreshing.hide().css({height:""})})},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$container.height()>=n.$refreshing.position().top&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.loadingOptions.refresh&&e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE]?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$container.on("scrollChange",n.proxy(this._scroll,this)),this._scrollY=this.$el.scrollTop,this.el.scrollTop+this.$el.height()>=this.$refreshing.offset().top&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$el.off("scrollChange",this._scroll),this.$refreshing&&this.$refreshing.remove())},abort:function(){this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading())},destory:function(){this.abort(),o.fn.destory.apply(this,arguments)}});i.exports=h});
define("sl/widget/imglazyload",["$","extend/scrollStop","extend/ortchange"],function(t){var n=t("$"),o=(t("./../tmpl"),t("./../base"),t("./../view")),a=Array.prototype.splice;t("extend/scrollStop"),t("extend/ortchange");var l=o.extend({options:{threshold:0,container:window,urlName:"data-url",eventName:"scrollStop",innerScroll:!1,isVertical:!0},initialize:function(){var t=this,e=t.options,i=n(e.container),r=e.isVertical,s=n.isWindow(i.get(0)),o={win:[r?"scrollY":"scrollX",r?"innerHeight":"innerWidth"],img:[r?"top":"left",r?"height":"width"]},a=t.$el.is("img");!s&&(o.win=o.img),t.isImg=a,t.isWindow=s,t.OFFSET=o,t.$viewPort=i,t.pedding=[],t.add(t.$el),n(document).ready(function(){t.detect()}),!e.innerScroll&&t.listenTo(n(window),e.eventName+" ortchange",function(){t.detect()})},add:function(t){this.pedding=Array.prototype.slice.call(n(this.pedding).add(t),0).reverse(),this.detect()},_load:function(t){var e=this,i=n(t),r={},s=i,o=e.options;this.isImg||(n.each(i.get(0).attributes,function(){~this.name.indexOf("data-")&&(r[this.name]=this.value)}),s=n("<img />").attr(r)),i.trigger("startload"),s.on("load",function(){!e.isImg&&i.replaceWith(s),i.trigger("loadcomplete"),s.off("load")}).on("error",function(){var e=n.Event("error");i.trigger(e),e.defaultPrevented||pedding.push(t),s.off("error").remove()}).attr("src",i.attr(o.urlName))},isInViewport:function(t){var e=this.options,i=this.isWindow?window:this.$viewPort.offset(),n=this.OFFSET,r=i[n.win[0]],s=i[n.win[1]];return r>=t[n.img[0]]-e.threshold-s&&r<=t[n.img[0]]+t[n.img[1]]},detect:function(){var e,i,r,s,t=this,o=t.pedding;for(e=o.length;e--;)i=n(s=o[e]),r=i.offset(),t.isInViewport(r)&&(a.call(o,e,1),t._load(s))}});return l});
define("sl/widget/dropdown",["$","./../view","./../tmpl"],function(t){var n=t("$"),o=t("./../tmpl"),r=(t("./../base"),t("./../view")),a=r.extend({el:'<div class="dropdown hide"><ul class="dropdown_bd js_dropdown">{%each(i,item) data%}<li>${item.text}</li>{%/each%}</ul></div>',events:{"tap .js_dropdown>li":function(t){var e=n(t.currentTarget);e.addClass("curr").siblings(".curr").removeClass("curr"),this.hide(),this.index=e.index(),this.trigger("Change",this.index,this.options.data[this.index])}},index:0,options:{onChange:null,data:[],isFixed:!1,attacher:null},initialize:function(){var t=this;t.on("Destory",function(){this.mask.off("tap").remove()}),t.on("Hide",function(){this.$el.removeClass("visible")}),t.$bd=t.$(".js_dropdown"),t._template=o(t.$bd.html()),t.$bd.html(t._template(t.options)),t.$attacher=n(t.options.attacher),t.listenTo(t.$attacher,"tap",function(){t.$attacher.addClass("visible"),t.show()}),t.$(".js_dropdown>li").eq(t.index).addClass("curr"),t.mask=n('<div class="winheight" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div>').on("tap click touchend touchmove touchstart",function(t){t.preventDefault()}).appendTo(document.body),t.mask.tap(function(){t.hide()}),t.options.isFixed&&t.$el.css({position:"fixed"}),t.$el.appendTo(document.body),t.$el.on(n.fx.transitionEnd,function(){t.$el.hasClass("hide")&&t.$el.hide()}),t.options.onChange&&t.on("Change",t.options.onChange)},show:function(){var t=this,e=t.$attacher.offset();t.$el.show().removeClass("hide"),t.el.clientWidth,t.mask.show(),t.pos(e.left+(t.$attacher.width()-t.$el.width())/2,e.top+t.$attacher.height())},hide:function(){var t=this;t.$el.addClass("hide"),t.mask.hide(),t.trigger("Hide")},render:function(){},pos:function(t,e){var i=this;i.$el.css({top:e,left:t})}});return a});